apiVersion: 1

contactPoints:
  - orgId: 1
    name: telegram-bath-lights
    receivers:
      - uid: telegram-bath-lights
        type: telegram
        settings:
          bottoken: $TELEGRAM_BOT_TOKEN
          chatid: $TELEGRAM_CHAT_ID
          message: |
            🏠 **{{ .GroupLabels.service | title }} Alert**
            
            **Status:** {{ .Status | title }}
            **Severity:** {{ .GroupLabels.severity | title }}
            
            {{ range .Alerts }}
            📋 **{{ .Annotations.summary }}**
            📊 {{ .Annotations.description }}
            
            🔗 [View Dashboard]({{ .GeneratorURL }})
            📖 [Troubleshooting Guide]({{ .Annotations.runbook_url }})
            {{ end }}
            
            ⏰ {{ .CommonAnnotations.timestamp }}
          parseMode: Markdown
          uploadImage: false

policies:
  - orgId: 1
    receiver: telegram-bath-lights
    group_by:
      - service
      - severity
    group_wait: 30s
    group_interval: 5m
    repeat_interval: 4h
    matchers:
      - service = bath-lights