# Test MQTT broker configuration
listener 1883
allow_anonymous true
log_type all
connection_messages true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# Enable persistence for test reliability
persistence true
persistence_location /mosquitto/data/

# Set autosave interval
autosave_interval 60

# Message size limits
message_size_limit 1MB
max_inflight_messages 100
max_queued_messages 1000

# Client connection settings
max_connections 100
keepalive 60